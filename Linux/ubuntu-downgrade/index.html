<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Ubuntu的降级和升级 · maohhgg</title><meta name="description" content="Ubuntu 降级,Ubuntu downgrade,Ubuntu 升级"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://maohhgg.github.io/atom.xml" title="maohhgg"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAG</a></li><li class="nav-list-item"><a href="https://github.com/maohhgg" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Ubuntu的降级和升级</h1><div class="post-tags"><a href="/tags/Linux/">#Linux</a></div><div class="post-info">2017年11月22日</div><div class="post-content"><p>最近看 Ubuntu 17.10 正式版上线了，就把我的寨板Cube iWrok 1x,升级到了Ubuntu 17.10，但是Ubuntu 17.10默认使用 wayland 的 gnome-shell 消耗了大量的系统资源。我的寨板使用的是Intel Atom x5-Z8350，对此已经力不从心了，不要说运行其他的。遂将 Gnome 替换成 KDE5 Plasma，配置完成后发现 KDE5.10 版本使用了 Arc theme 后符合我的直男审美。就像把我主力机使用的 Pantheon 替换成 KDE5。问题就来了。</p>
<a id="more"></a>
<h3 id="不要抱着试一试的心态，想清楚了再干"><a href="#不要抱着试一试的心态，想清楚了再干" class="headerlink" title="不要抱着试一试的心态，想清楚了再干"></a>不要抱着试一试的心态，想清楚了再干</h3><p>我的主力机使用的是基于 Ubuntu 16.04.2 LTS 的 Elementary OS，所以deb包管理的源列表使用的是Elementary OS和Ubuntu xenial。在Ubuntu xenial下KDE的最新版本为 <a href="https://packages.ubuntu.com/xenial/plasma-desktop" target="_blank" rel="noopener">5.5.5</a>，不是Ubuntu artful下的 <a href="https://packages.ubuntu.com/artful/plasma-desktop" target="_blank" rel="noopener">5.10.x</a>。</p>
<p>不是最新的版本，不爽值+1，看了看我当前的系统，网易云音乐 1.0.0-2 在 Pantheon 桌面下没有状态栏菜单，网易云音乐 1.1.0 正式版又是不能运行。fcitx + fcitx-googlepinyin 存在bug，打拼音会时常发生单个字母直接输入，没有读取到拼音中，不如打连打“拼音”，拼音“pinyin”。字母漏掉输入框中变成了“皮n因”，拼音“piyin”。所以我决定把我的Elementary OS基于 Ubuntu 16.04.2 LTS，升级到Ubuntu 17.10。</p>
<h4 id="升级Ubuntu"><a href="#升级Ubuntu" class="headerlink" title="升级Ubuntu"></a>升级Ubuntu</h4><p>一般Ubuntu16.04升级Ubuntu17，只要把 Update-manager 中的 Release upgrade 的“长期支持版本(Long term support releases only)”改为“任何新版本(Normal Releases)”。或者直接修改配置文件<code>/etc/update-manager/release-upgrades</code>，把<code>Prompt=lts</code>修改为<code>Prompt=normal</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[DEFAULT]</span></pre></td></tr><tr><td class="code"><pre><span class="line"># Default prompting behavior, valid options:</span></pre></td></tr><tr><td class="code"><pre><span class="line">#</span></pre></td></tr><tr><td class="code"><pre><span class="line">#  never  - Never check for a new release.</span></pre></td></tr><tr><td class="code"><pre><span class="line">#  normal - Check to see if a new release is available.  If more than one new</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           release is found, the release upgrader will attempt to upgrade to</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           the release that immediately succeeds the currently-running</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           release.</span></pre></td></tr><tr><td class="code"><pre><span class="line">#  lts    - Check to see if a new LTS release is available.  The upgrader</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           will attempt to upgrade to the first LTS release available after</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           the currently-running one.  Note that this option should not be</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           used if the currently-running release is not itself an LTS</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           release, since in that case the upgrader won&#39;t be able to</span></pre></td></tr><tr><td class="code"><pre><span class="line">#           determine if a newer release is available.</span></pre></td></tr><tr><td class="code"><pre><span class="line">Prompt&#x3D;normal</span></pre></td></tr></table></figure>
<blockquote>
<p>因为Ubuntu16.04是一个长期支持版本，官方对他会进行5年的支持，所以Ubuntu16.04全称为Ubuntu16.04 LTS(Long term support)，Ubuntu16.04 LTS最近更新版本2017/8/3的Ubuntu16.04.3 LTS。LTS版本每两年发布一次，最新的LTS为Ubuntu16.04，上一版本为Ubuntu14.04，下一次发布版本将为Ubuntu18.04。而普通版本只有9个月的技术支持。</p>
</blockquote>
<p>在更改后只需执行<code>sudo do-release-upgrade</code>就可以升级到新本版。因为我是在网上了google了这个命令，google上说是<code>do-release-upgrade -d</code>。我并没有查这他的具体意义，就在我的Consle中执行了。</p>
<p>我的Consle包含了多个标签。因为我喜欢打开多个标签，一个标签单独来运行<code>sslocal</code>进行科学上网。可以查看这个<a href="../use-Kcptun-to-speed-up-Shadowsocks/">链接</a>。多个单独标签<code>ssh</code>我的其他机器。当我发现我把<code>sudo do-release-upgrade -
d</code>执行错了标签时，已经在更新很多软件包了，快要结束了(我的主力机 pi@Phoenix，和寨板pi@SurfTab 太相似了)。没错我把我SSH连接的机器更新了，我SSH连接的这台就是我的寨板，他当前的系统是Ubuntu17.10，他默认设置‘任何新版本’就可以更新(Prompt=normal)。查看<code>do-release-upgrade</code>：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Usage: do-release-upgrade [options]</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">Options:</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -h, --help            show this help message and exit</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -V, --version         显示版本并退出</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -d, --devel-release   If using the latest supported release, upgrade to the</span></pre></td></tr><tr><td class="code"><pre><span class="line">                        development release</span></pre></td></tr><tr><td class="code"><pre><span class="line">  --data-dir=DATA_DIR   包含数据文件的文件夹</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -p, --proposed        尝试通过 $distro-proposed 更新到最新版本。</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -m MODE, --mode=MODE  以特定模式升级。 目前支持：用“桌面”为桌面系统，“服务器”为服务器系统升级。</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -f FRONTEND, --frontend=FRONTEND</span></pre></td></tr><tr><td class="code"><pre><span class="line">                        运行指定的前端</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -c, --check-dist-upgrade-only</span></pre></td></tr><tr><td class="code"><pre><span class="line">                        仅在有新的发行版发布时检查，并通过退出码(exit code)报告结果</span></pre></td></tr><tr><td class="code"><pre><span class="line">  -q, --quiet</span></pre></td></tr></table></figure>
<p><code>-d</code>的参数就是安装开发版，所以我的寨板是直接更新到Ubuntu18.04 Development版本。但当时我注意到。我在想把我的主力机升级到Ubuntu 17.10。</p>
<p>在我的主力机上，因为是Elementary OS，不包含Ubuntu的图形化程序 Update-manager，只能通过更改配置文件，再执行<code>sudo do-release-upgrade</code>。但是执行后提示</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">正在检查新版 Ubuntu</span></pre></td></tr><tr><td class="code"><pre><span class="line">No new release found.</span></pre></td></tr></table></figure>
<p>Elementary OS的软件源使用了Elementary OS自己的，不是Ubuntu官方的。所以<code>do-release-upgrade</code>也是在更新Elementary OS本身。所以我想更该软件源为Ubuntu。我直接复制了寨板的<code>source.list</code>文件。更新了当前所有软件包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@SurfTab$ scp /etc/apt/sources.list root@Phoenix:/etc/apt/</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">pi@Phoenix$ sudo apt update &amp;&amp; sudo apt dist-upgrade</span></pre></td></tr></table></figure>
<p>更新完重启。因为之前是Pantheon桌面，在更新后没法运行。 <code>Ctrl+Alt+F1</code>切换到 tty1，安装上KDE桌面环境。进入系统使用<code>lsb_release -a</code>查看系统版本。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Distributor ID: Ubuntu</span></pre></td></tr><tr><td class="code"><pre><span class="line">Description:    Ubuntu 18.04 Dev</span></pre></td></tr><tr><td class="code"><pre><span class="line">Release:        18.04</span></pre></td></tr><tr><td class="code"><pre><span class="line">Codename:       bionic</span></pre></td></tr></table></figure>

<h4 id="Ubuntu-降级"><a href="#Ubuntu-降级" class="headerlink" title="Ubuntu 降级"></a>Ubuntu 降级</h4><p>和寨板一样直接升级到了 Ubuntu 18.04。回过头查看<code>/etc/apt/sources.list</code>这个文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># deb cdrom:[Kubuntu 17.10 _Artful Aardvark_ - Release amd64 (20171017.1)]/ artful main multiverse restricted universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># newer versions of the distribution.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Major bug fix updates produced after the final release of the</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## distribution.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## team. Also, please note that software in universe WILL NOT receive any</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## review or updates from the Ubuntu security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## team, and may not be under a free licence. Please satisfy yourself as to </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## your rights to use the software. Also, please note that software in </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository may not have been tested as</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## extensively as that contained in the main release, although it includes</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## newer versions of some applications which may provide useful features.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Also, please note that software in backports WILL NOT receive any review</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## or updates from the Ubuntu security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-backports main restricted universe multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Uncomment the following two lines to add software from Canonical's</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## 'partner' repository.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## This software is not part of Ubuntu, but is offered by Canonical and the</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## respective vendors as a service to Ubuntu users.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb http://archive.canonical.com/ubuntu artful partner</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://archive.canonical.com/ubuntu artful partner</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security multiverse</span></span></pre></td></tr></table></figure>
<p>原本为Ubuntu 17.10代号的artful以及更该为了Ubuntu 18.04的代号bionic。所有的软件包都更新到Ubuntu 18.04。系统现在也为Ubuntu 18.04了。在我拷贝寨板的软件源的时候，他的升级程序以及把这个文件更新了，直接拷贝没有检查所以双双更新Ubuntu 18.04。:smile:</p>
<p>因为是开发版，实际使用过程中可能出现各种BUG，只好降级会Ubuntu 17.10。</p>
<h5 id="第一步：-软件源中添加想要降级版本的源。"><a href="#第一步：-软件源中添加想要降级版本的源。" class="headerlink" title="第一步： 软件源中添加想要降级版本的源。"></a>第一步： 软件源中添加想要降级版本的源。</h5><p>所以上面的<code>/etc/apt/sources.list</code>改为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb cdrom:[Kubuntu 17.10 _Artful Aardvark_ - Release amd64 (20171017.1)]/ artful main multiverse restricted universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># newer versions of the distribution.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Major bug fix updates produced after the final release of the</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## distribution.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-updates main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## team. Also, please note that software in universe WILL NOT receive any</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## review or updates from the Ubuntu security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful universe</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-updates universe</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## team, and may not be under a free licence. Please satisfy yourself as to </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## your rights to use the software. Also, please note that software in </span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-updates multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-updates multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## N.B. software from this repository may not have been tested as</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## extensively as that contained in the main release, although it includes</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## newer versions of some applications which may provide useful features.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Also, please note that software in backports WILL NOT receive any review</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## or updates from the Ubuntu security team.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-backports main restricted universe multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://cn.archive.ubuntu.com/ubuntu/ artful-backports main restricted universe multiverse</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## Uncomment the following two lines to add software from Canonical's</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## 'partner' repository.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## This software is not part of Ubuntu, but is offered by Canonical and the</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment">## respective vendors as a service to Ubuntu users.</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb http://archive.canonical.com/ubuntu artful partner</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://archive.canonical.com/ubuntu artful partner</span></span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-security main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security main restricted</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-security universe</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security universe</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security universe</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ artful-security multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security multiverse</span></pre></td></tr><tr><td class="code"><pre><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu artful-security multiverse</span></span></pre></td></tr></table></figure>

<h5 id="第二步：建立-etc-apt-preferences文件"><a href="#第二步：建立-etc-apt-preferences文件" class="headerlink" title="第二步：建立/etc/apt/preferences文件"></a>第二步：建立<code>/etc/apt/preferences</code>文件</h5><p>/etc/apt/preferences 内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#/etc/apt/preferences</span></span></pre></td></tr><tr><td class="code"><pre><span class="line">Package: *</span></pre></td></tr><tr><td class="code"><pre><span class="line">Pin: release a=artful</span></pre></td></tr><tr><td class="code"><pre><span class="line">Pin-Priority: 1001</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">Package: *</span></pre></td></tr><tr><td class="code"><pre><span class="line">Pin: release a=bionic</span></pre></td></tr><tr><td class="code"><pre><span class="line">Pin-Priority: 60</span></pre></td></tr></table></figure>
<p>这样artful的优先级高于bionic，优先安装。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt-get dist-upgrade</span></pre></td></tr></table></figure>
<p><img src="/Linux/ubuntu-downgrade/Screenshot_1.png" alt="Screenshot_1"><br><img src="/Linux/ubuntu-downgrade/Screenshot_2.png" alt="Screenshot_2"><br>重启</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">reboot</span></pre></td></tr></table></figure>
<p><img src="/Linux/ubuntu-downgrade/Screenshot_3.png" alt="Done"></p>
<p>搞定</p>
</div></article></div></main><footer><div class="paginator"><a href="/Python/lxml-hole/" class="prev">上一篇</a><a href="/Linux/note/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'maohhgg';
var disqus_identifier = 'Linux/ubuntu-downgrade/';
var disqus_title = 'Ubuntu的降级和升级';
var disqus_url = 'http://maohhgg.github.io/Linux/ubuntu-downgrade/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//maohhgg.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2019 <a href="http://maohhgg.github.io">maohhgg</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/maohhgg/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-110078780-1",'auto');ga('send','pageview');</script></body></html>